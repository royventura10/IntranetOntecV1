<!DOCTYPE html >
<html   xml:lang="en" lang="en" 
        xmlns="http://www.w3.org/1999/xhtml"
        xmlns:th="https://www.thymeleat.org">
    <!--dashboard-head-->
    <head th:replace="layout/dashboard :: dashboard-head">
        <title>GRUPO ONTEC | Dashboard</title>
        
    </head>
    <body>


        <div id="wrapper">

            <!--dashboard-nav-->
            <nav th:replace="layout/dashboard :: dashboard-nav">
            </nav>

            <div id="page-wrapper" class="gray-bg">
                <!--dashboard-nav-superior-->
                <div th:replace="layout/dashboard :: dashboard-nav-superior">
                </div>

                <!--Ruta Marca -->
                <div class="row wrapper border-bottom white-bg page-heading">
                    <div class="col-lg-10">
                        <h2>Gestion de Venta</h2>
                        <ol class="breadcrumb">
                            <li class="breadcrumb-item">
                                <a href="index.html">Home</a>
                            </li>
                            <li class="breadcrumb-item">
                                <a>Realizar</a>
                            </li>
                            <li class="breadcrumb-item active">
                                <strong>Venta de Equipos</strong>
                            </li>
                        </ol>
                    </div>
                    <div class="col-lg-2">

                    </div>
                </div>


                <!-- START layout-cuerpo-->
                <div class="wrapper wrapper-content" > 

                    <!--Formulario-->
                    <div class="row">
                        <div class="col-lg-6">
                            <div class="ibox ">
                                <div class="ibox-title">
                                    <h5>Añadir equipos a la venta<small><br>LLenar todos los datos para agregar un equipo.</small></h5>
                                    <div class="ibox-tools">
                                        <a class="collapse-link">
                                            <i class="fa fa-chevron-up"></i>
                                        </a>
                                        <a class="dropdown-toggle" data-toggle="dropdown" href="#">
                                            <i class="fa fa-wrench"></i>
                                        </a>
                                        <ul class="dropdown-menu dropdown-user">
                                            <li><a href="#" class="dropdown-item">Config option 1</a>
                                            </li>
                                            <li><a href="#" class="dropdown-item">Config option 2</a>
                                            </li>
                                        </ul>
                                        <a class="close-link">
                                            <i class="fa fa-times"></i>
                                        </a>
                                    </div>
                                </div>
                                <div class="ibox-content">
                                    <div style="display: none" id="selectProducto">
                                        <select  name="equipos" class="form-control selectProduct" aria-label=".form-select-lg example" style="width:100%">
                                                 <option selected>Elegir</option>    
                                                 <option th:each="equipos:${equipos}" th:text="${equipos.nom_equi}" th:value="${equipos.cod_equi}" th:data-precio="${equipos.precio}"></option>
                                        </select>
                                    </div>
                                    <form th:action='@{/SumarEquipo}' method="POST">
                                         <div class="form-group row"><label class="col-sm-2 col-form-label" for="floatingSelect">Cliente:</label>
                                        <div class="col-sm-10"> <select  name="cliente" class="form-control" aria-label=".form-select-lg example">
                                                 <option selected data-precio="">Elegir</option>    
                                                 <option th:each="cliente:${cliente}" th:text="${cliente.rs_cli}" th:value="${cliente.cod_cli}"></option>
                                                 </select></div>
                                             <div class="col-sm-2">
                                                 <button class="btn btn-block" type="button" id="btnAdd">Añadir producto</button>
                                             </div> 
                                             </div>   
                                        
                                        <table id="tableProducto" style="width:100%">
                                            <tr>
                                                <th>Producto</th>
                                                <th width="100">Precio unitario</th>
                                                <th width="100">Cantidad</th>
                                                <th width="50">Opciones</th>
                                            </tr>
                                        </table>
                                        <!--
                                        <div class="form-group row"><label class="col-sm-2 col-form-label" for="floatingSelect">Equipo:</label>
                                        <div class="col-sm-10"> <select  name="equipos" class="form-control" id="floatingSelect1" aria-label=".form-select-lg example">
                                                 <option selected>Elegir</option>    
                                                 <option th:each="equipos:${equipos}" th:text="${equipos.nom_equi}" th:value="${equipos.cod_equi}"></option>
                                                 </select></div></div>    
                                         <div class="form-group row"><label class="col-sm-2 col-form-label">Cantidad</label>
                                            <div class="col-sm-10"><input id="cantidad" type="text" placeholder="Cantidad" class="form-control" name="cantidad" required></div>
                                        </div>
                                        -->
                                        <div class="hr-line-dashed"></div>
                                        <div class="form-group row">
                                            <div class="col-sm-4 col-sm-offset-2">
                                                <button class="btn btn-primary btn-sm" type="submit" >Guardar</button>
                                            </div>
                                        </div>
                                    </form>
                                </div>
                            </div>
                        </div>
                        <!--Lista de Productos-->
                       
                    </div>
                </div>




                <!--dashboard-footer-->
                <div th:replace="layout/dashboard :: dashboard-footer" >
                </div>
            </div>
        </div> 
        <!--dashboard-navigation-bar-->
        <div th:replace="layout/dashboard :: dashboard-navigation-bar" >
        </div>


        <!-- Mainly scripts -->
        <script src="js/jquery-3.1.1.min.js"></script>
        <script src="js/popper.min.js"></script>
        <script src="js/bootstrap.js"></script>
        <script src="js/plugins/metisMenu/jquery.metisMenu.js"></script>
        <script src="js/plugins/slimscroll/jquery.slimscroll.min.js"></script>

        <!-- Flot -->
        <script src="js/plugins/flot/jquery.flot.js"></script>
        <script src="js/plugins/flot/jquery.flot.tooltip.min.js"></script>
        <script src="js/plugins/flot/jquery.flot.spline.js"></script>
        <script src="js/plugins/flot/jquery.flot.resize.js"></script>
        <script src="js/plugins/flot/jquery.flot.pie.js"></script>
        <script src="js/plugins/flot/jquery.flot.symbol.js"></script>
        <script src="js/plugins/flot/curvedLines.js"></script>

        <!-- Peity -->
        <script src="js/plugins/peity/jquery.peity.min.js"></script>
        <script src="js/demo/peity-demo.js"></script>

        <!-- Custom and plugin javascript -->
        <script src="js/inspinia.js"></script>
        <script src="js/plugins/pace/pace.min.js"></script>

        <!-- jQuery UI -->
        <script src="js/plugins/jquery-ui/jquery-ui.min.js"></script>

        <!-- Jvectormap -->
        <script src="js/plugins/jvectormap/jquery-jvectormap-2.0.2.min.js"></script>
        <script src="js/plugins/jvectormap/jquery-jvectormap-world-mill-en.js"></script>

        <!-- Sparkline -->
        <script src="js/plugins/sparkline/jquery.sparkline.min.js"></script>

        <!-- Sparkline demo data  -->
        <script src="js/demo/sparkline-demo.js"></script>

        <!-- ChartJS-->
        <script src="js/plugins/chartJs/Chart.min.js"></script>

        <script type="text/javascript">
            $(function(){
                
                $('#btnAdd').click(function(){
                   //alert('hola');
                    var select = $('#selectProducto').html();
                    var cantidad = '<input type="number" placeholder="Cantidad" class="form-control inputCantidad" name="cantidad" required>';           
                    var eliminar = '<button class="btn btn-danger deleteItem"><i class="fa fa-trash"></i></button>';
                   var precio_unitario = '<input type="text" class="form-control inputPrecio" name="precio"  readonly>';
                   $('#tableProducto').append('<tr><td>'+select+'</td><td>'+precio_unitario+'</td><td>'+cantidad+'</td><td>'+eliminar+'</td></tr>');
                });
                
                $(document).on('click','.deleteItem',function(){
                    $(this).parent().parent().remove();
                });
                
                $(document).on('change','.selectProduct', function(){
                    var precio = $(this).find('option:selected').attr('data-precio');
                    $(this).parent().parent().find('.inputPrecio').val(precio);
                });
                
            });
            // selectProducto inputCantidad tableProducto btnAdd
            </script>
    </body>
</html>

